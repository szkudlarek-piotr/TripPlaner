<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="container">
        <input type="text" id="countriesInput" onkeyup="sendGetRequest()" />
    </div>
    <script>
        function sendGetRequest() {
            const input_txt = document.getElementById('countriesInput').value
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "http://localhost:3000/countries?search=" + input_txt)
            xhr.onreadystatechange = () => {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    const status = xhr.status;
                    const countriesToShow = JSON.parse(xhr.responseText)
                    for (let i = 0; i< countriesToShow.length;i++){
                        //console.log(countriesToShow[i].name)
                        let boldedCountryName = boldSearchInput(input_txt, countriesToShow[i].name)
                        console.log(boldedCountryName)
                        
                    }
                }
            };
            xhr.send(input_txt);
        }
        function boldSearchInput(inputText, countryName) {
            let capitalizedInput = inputText.toUpperCase()
            let capitalizedCountryName = countryName.toUpperCase()
            const boldStartIndex = capitalizedCountryName.indexOf(capitalizedInput)
            const boldStopIndex = boldStartIndex + inputText.length
            const beforeText = countryName.substring(0, boldStartIndex)
            const boldedText = countryName.substring(boldStartIndex, boldStopIndex)
            const afterText = countryName.substring(boldStopIndex)
            const boldedCountry = `${beforeText}<b>${boldedText}</b>${afterText}`
            return boldedCountry
        }
    </script>
</body>

</html>